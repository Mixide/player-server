(function(){"use strict";var e={9257:function(e,a,t){var s=t(5130),n=t(6768);function o(e,a,t,s,o,r){const l=(0,n.g2)("NavBar"),i=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.bF)(l),(0,n.bF)(i)],64)}var r=t.p+"static/img/audio256.2a14064e.png",l=t(1060);const i=e=>((0,n.Qi)("data-v-1e5b133a"),e=e(),(0,n.jt)(),e),c={class:"navbar navbar-expand-lg bg-body-tertiary"},u={class:"container-fluid"},d=i((()=>(0,n.Lk)("img",{src:r,alt:"Logo",width:"35",height:"35"},null,-1))),p=i((()=>(0,n.Lk)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n.Lk)("span",{class:"navbar-toggler-icon"})],-1))),m={class:"collapse navbar-collapse",id:"navbarText"},v={class:"navbar-nav me-auto mb-2 mb-lg-0"},f={class:"nav-item"},g=i((()=>(0,n.Lk)("img",{src:l,alt:"Search",width:"35",height:"35"},null,-1))),h={class:"collapse navbar-collapse",id:"navbarText"},b={key:0,class:"navbar-nav"},k={class:"nav-item"},L={class:"nav-item"},y={key:1,class:"navbar-nav"},_={class:"nav-item"};function w(e,a,t,o,r,l){const i=(0,n.g2)("router-link"),w=(0,n.g2)("el-input");return(0,n.uX)(),(0,n.CE)("nav",c,[(0,n.Lk)("div",u,[(0,n.bF)(i,{class:"nav-link",to:{name:"home"}},{default:(0,n.k6)((()=>[d,(0,n.eW)(" 在线音乐 ")])),_:1}),p,(0,n.Lk)("div",m,[(0,n.Lk)("ul",v,[(0,n.Lk)("li",f,[(0,n.bF)(i,{class:"nav-link",to:{name:"musicspace"}},{default:(0,n.k6)((()=>[(0,n.eW)("音乐空间")])),_:1})])]),(0,n.Lk)("form",{onSubmit:a[1]||(a[1]=(0,s.D$)(((...e)=>l.search&&l.search(...e)),["prevent"]))},[g,(0,n.bF)(w,{modelValue:e.input,"onUpdate:modelValue":a[0]||(a[0]=a=>e.input=a),style:{width:"240px"},placeholder:"搜索音乐"},null,8,["modelValue"])],32)]),(0,n.Lk)("div",h,[o.store.getters.isLoggedIn?((0,n.uX)(),(0,n.CE)("ul",y,[(0,n.Lk)("li",_,[(0,n.Lk)("a",{class:"nav-link",style:{cursor:"pointer"},onClick:a[2]||(a[2]=(...e)=>l.handleLogout&&l.handleLogout(...e))},"退出")])])):((0,n.uX)(),(0,n.CE)("ul",b,[(0,n.Lk)("li",k,[(0,n.bF)(i,{class:"nav-link",to:{name:"login"}},{default:(0,n.k6)((()=>[(0,n.eW)("登录")])),_:1})]),(0,n.Lk)("li",L,[(0,n.bF)(i,{class:"nav-link",to:{name:"register"}},{default:(0,n.k6)((()=>[(0,n.eW)("注册")])),_:1})])]))])])])}t(4114);var C=t(782),E={name:"NavBar",setup(){const e=(0,C.Pj)();return{store:e}},methods:{...(0,C.i0)(["logout"]),handleLogout(){this.logout(),this.$router.push("/login/")},search(){}},data(){return{iconUrl:t(1060),query:""}}},F=t(1241);const x=(0,F.A)(E,[["render",w],["__scopeId","data-v-1e5b133a"]]);var A=x,I={name:"App",components:{NavBar:A}};const S=(0,F.A)(I,[["render",o]]);var U=S,j=t(1387),O=t(4232);const T=e=>((0,n.Qi)("data-v-a0f7ccc8"),e=e(),(0,n.jt)(),e),X={class:"row justify-content-md-center"},R={class:"col-3"},P={class:"mb-3"},W=T((()=>(0,n.Lk)("label",{for:"username",class:"form-label"},"用户名",-1))),q={class:"mb-3"},J=T((()=>(0,n.Lk)("label",{for:"password",class:"form-label"},"密码",-1))),K={class:"error-message"},M=T((()=>(0,n.Lk)("button",{type:"submit",class:"btn btn-primary"},"登录",-1)));function N(e,a,t,o,r,l){const i=(0,n.g2)("Content");return(0,n.uX)(),(0,n.Wv)(i,{style:{"margin-top":"200px",width:"500px"}},{default:(0,n.k6)((()=>[(0,n.Lk)("div",X,[(0,n.Lk)("div",R,[(0,n.Lk)("form",{onSubmit:a[2]||(a[2]=(0,s.D$)(((...e)=>l.handleLogin&&l.handleLogin(...e)),["prevent"]))},[(0,n.Lk)("div",P,[W,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.username=e),type:"text",class:"form-control",id:"username",required:""},null,512),[[s.Jo,r.username]])]),(0,n.Lk)("div",q,[J,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>r.password=e),type:"password",class:"form-control",id:"password",required:""},null,512),[[s.Jo,r.password]])]),(0,n.Lk)("div",K,(0,O.v_)(r.error_message),1),M],32)])])])),_:1})}const V={class:"container"},D={class:"card"},$={class:"card-body"};function H(e,a,t,s,o,r){return(0,n.uX)(),(0,n.CE)("div",V,[(0,n.Lk)("div",D,[(0,n.Lk)("div",$,[(0,n.RG)(e.$slots,"default",{},void 0,!0)])])])}var Q={name:"Content"};const B=(0,F.A)(Q,[["render",H],["__scopeId","data-v-aa710796"]]);var G=B,z={name:"Login",components:{Content:G},data(){return{username:"",password:"",error_message:""}},methods:{...(0,C.i0)(["login"]),handleLogin(){this.login({username:this.username,password:this.password,success:e=>{-1==e.data.code?alert(e.data.msg):this.$router.push("/")},error:()=>{console.error("登录失败")}})}}};const Y=(0,F.A)(z,[["render",N],["__scopeId","data-v-a0f7ccc8"]]);var Z=Y;const ee=e=>((0,n.Qi)("data-v-092967d7"),e=e(),(0,n.jt)(),e),ae=ee((()=>(0,n.Lk)("div",{id:"aplayer"},null,-1))),te={class:"row"},se={class:"col-3"},ne={class:"col-9"};function oe(e,a,t,s,o,r){const l=(0,n.g2)("UserInfo"),i=(0,n.g2)("Upload"),c=(0,n.g2)("MusicList"),u=(0,n.g2)("Content");return(0,n.uX)(),(0,n.CE)(n.FK,null,[ae,(0,n.bF)(u,null,{default:(0,n.k6)((()=>[(0,n.Lk)("div",te,[(0,n.Lk)("div",se,[(0,n.bF)(l,{user:s.user},null,8,["user"]),(0,n.bF)(i,{id:s.user.id},null,8,["id"])]),(0,n.Lk)("div",ne,[(0,n.bF)(c,{list:s.music_list,ap:s.ap},null,8,["list","ap"])])])])),_:1})],64)}const re={class:"card"},le={class:"card-body"},ie={class:"row"},ce={class:"col-3"},ue=["src"],de={class:"col-9"},pe={class:"username"},me={class:"music-nums"};function ve(e,a,t,s,o,r){return(0,n.uX)(),(0,n.CE)("div",re,[(0,n.Lk)("div",le,[(0,n.Lk)("div",ie,[(0,n.Lk)("div",ce,[(0,n.Lk)("input",{type:"file",ref:"fileInput",onChange:a[0]||(a[0]=(...e)=>r.uploadFile&&r.uploadFile(...e)),style:{display:"none"}},null,544),(0,n.Lk)("img",{class:"img-fluid",src:t.user.photo,alt:"选择图片",onClick:a[1]||(a[1]=(...e)=>r.handleImageClick&&r.handleImageClick(...e))},null,8,ue)]),(0,n.Lk)("div",de,[(0,n.Lk)("div",pe,(0,O.v_)(t.user.username),1),(0,n.Lk)("div",me,"音乐数:"+(0,O.v_)(t.user.music_nums),1)])])])])}var fe=t(4373);const ge=e=>fe.A.get("http://localhost:8000/api/music/",{params:{userid:e}}),he=(e,a)=>(e.append("userid",a),fe.A.post("http://localhost:8000/api/uploadimage/",e,{headers:{"Content-Type":"multipart/form-data"}})),be=(e,a)=>(e.append("userid",a),fe.A.post("http://localhost:8000/api/uploadmusic/",e,{headers:{"Content-Type":"multipart/form-data"}})),ke=(e,a)=>fe.A.post("http://localhost:8000/api/user/login/",{username:e,password:a}),Le=(e,a)=>fe.A.post("http://localhost:8000/api/user/register/",{username:e,password:a});var ye={name:"UserInfo",props:{user:{type:Object,required:!0}},data(){return{files:[]}},methods:{...(0,C.i0)(["updateUserPhoto"]),handleImageClick(){this.$refs.fileInput.click()},uploadFile(e){if(this.files=Array.from(e.target.files),this.files.length>0){const e=new FormData;this.files.forEach((a=>{e.append("file",a)})),he(e,this.user.id).then((e=>{console.log("文件上传成功",e),this.updateUserPhoto(e.data)})).catch((e=>{console.error("文件上传失败",e)}))}}}};const _e=(0,F.A)(ye,[["render",ve],["__scopeId","data-v-509aaf64"]]);var we=_e;const Ce={class:"card list"},Ee={class:"card-body"},Fe={class:"scrollable-container"},xe=["onClick"],Ae={class:"card music"},Ie={class:"card-body"},Se={class:"row"},Ue={class:"col-10 music_name"},je={class:"col-2 artist"};function Oe(e,a,t,s,o,r){return(0,n.uX)(),(0,n.CE)("div",Ce,[(0,n.Lk)("div",Ee,[(0,n.Lk)("div",Fe,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.list.musics,((e,a)=>((0,n.uX)(),(0,n.CE)("div",{key:a,onClick:e=>r.handleCardClick(a)},[(0,n.Lk)("div",Ae,[(0,n.Lk)("div",Ie,[(0,n.Lk)("div",Se,[(0,n.Lk)("div",Ue,(0,O.v_)(e.name),1),(0,n.Lk)("div",je,"歌手："+(0,O.v_)(e.artist),1)])])])],8,xe)))),128))])])])}var Te={name:"MusicList",props:{list:{type:Object,required:!0},ap:{type:Object,required:!0}},watch:{ap:{}},methods:{handleCardClick(e){this.ap.value.pause(),this.ap.value.list.switch(e),this.ap.value.play()}}};const Xe=(0,F.A)(Te,[["render",Oe],["__scopeId","data-v-19a8cc1f"]]);var Re=Xe;const Pe=e=>((0,n.Qi)("data-v-645eda74"),e=e(),(0,n.jt)(),e),We={class:"card upload-music"},qe={class:"card-body"},Je={class:"mb-3"},Ke=Pe((()=>(0,n.Lk)("label",{for:"formFileMultiple",class:"form-label"},"上传音乐",-1)));function Me(e,a,t,s,o,r){return(0,n.uX)(),(0,n.CE)("div",We,[(0,n.Lk)("div",qe,[(0,n.Lk)("div",Je,[Ke,(0,n.Lk)("input",{class:"form-control",type:"file",id:"formFile",onChange:a[0]||(a[0]=(...e)=>r.handleFileChange&&r.handleFileChange(...e))},null,32),(0,n.Lk)("button",{type:"button",class:"btn btn-primary btn-sm",onClick:a[1]||(a[1]=(...e)=>r.uploadFiles&&r.uploadFiles(...e))},"上传")])])])}var Ne={name:"Upload",props:{id:{type:Object,required:!0}},data(){return{files:[]}},methods:{handleFileChange(e){this.files=Array.from(e.target.files)},uploadFiles(){if(this.files.length>0){const e=new FormData;this.files.forEach((a=>{e.append("file",a)})),be(e,this.id).then((e=>{console.log("文件上传成功",e),window.location.reload()})).catch((e=>{console.error("文件上传失败",e)}))}}}};const Ve=(0,F.A)(Ne,[["render",Me],["__scopeId","data-v-645eda74"]]);var De=Ve,$e=t(2333),He=t.n($e),Qe=t(144),Be={name:"MusicSpace",components:{Content:G,UserInfo:we,MusicList:Re,Upload:De},data(){return{info:{fixed:!1,listFolded:!0,autoplay:!1,preload:"none",loop:"all",order:"list"}}},setup(){const e=(0,C.Pj)(),a=(0,Qe.KR)(e.getters.user||JSON.parse(localStorage.getItem("user")));console.log(a.value.photo);const t=(0,Qe.KR)({musics:[]});let s=(0,Qe.KR)(null);const o=async()=>{try{const e=await ge(a.value.id);t.value.musics=e.data,a.value.music_nums=e.data.length,s.value=(0,Qe.KR)(new(He())({container:document.getElementById("aplayer"),audio:e.data,fixed:!1,listFolded:!0,autoplay:!1,preload:"auto",loop:"all",order:"list"}))}catch(e){console.error("Error fetching data:",e)}};return(0,n.sV)((()=>{o()})),{user:a,music_list:t,ap:s}}};const Ge=(0,F.A)(Be,[["render",oe],["__scopeId","data-v-092967d7"]]);var ze=Ge;const Ye={class:"row justify-content-md-center"},Ze={class:"col-3"},ea={class:"mb-3"},aa=(0,n.Lk)("label",{for:"username",class:"form-label"},"用户名",-1),ta={class:"mb-3"},sa=(0,n.Lk)("label",{for:"password",class:"form-label"},"密码",-1),na=(0,n.Lk)("button",{type:"submit",class:"btn btn-primary"},"注册",-1);function oa(e,a,t,o,r,l){const i=(0,n.g2)("Content");return(0,n.uX)(),(0,n.Wv)(i,null,{default:(0,n.k6)((()=>[(0,n.eW)(" 注册 "),(0,n.Lk)("div",Ye,[(0,n.Lk)("div",Ze,[(0,n.Lk)("form",{onSubmit:a[2]||(a[2]=(0,s.D$)(((...e)=>l.submit&&l.submit(...e)),["prevent"]))},[(0,n.Lk)("div",ea,[aa,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>r.username=e),type:"text",class:"form-control",id:"username"},null,512),[[s.Jo,r.username]])]),(0,n.Lk)("div",ta,[sa,(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":a[1]||(a[1]=e=>r.password=e),type:"password",class:"form-control",id:"password"},null,512),[[s.Jo,r.password]])]),na],32)])])])),_:1})}var ra={name:"Register",components:{Content:G},data(){return{username:"",password:""}},methods:{submit(){Le(this.username,this.password).then((e=>{alert(e.data.msg)})).catch((e=>{console.error("注册失败",e)}))}}};const la=(0,F.A)(ra,[["render",oa]]);var ia=la;function ca(e,a,t,s,o,r){const l=(0,n.g2)("Content");return(0,n.uX)(),(0,n.Wv)(l,null,{default:(0,n.k6)((()=>[(0,n.eW)(" 404 ")])),_:1})}var ua={name:"NotFound",components:{Content:G}};const da=(0,F.A)(ua,[["render",ca]]);var pa=da,ma=new C.Ay.Store({state:{user:"undefined"!=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null},mutations:{SET_USER(e,a){e.user=a,localStorage.setItem("user",JSON.stringify(a))},CLEAR_USER(e){e.user=null,localStorage.removeItem("user")},UPDATE_USER_PHOTO(e,a){e.user.photo=a,localStorage.setItem("user",JSON.stringify(e.user))}},actions:{async login({commit:e},{username:a,password:t,success:s,error:n}){try{const n=await ke(a,t),o=n.data.userinfo;e("SET_USER",o),s(n)}catch(o){n()}},logout({commit:e}){e("CLEAR_USER")},updateUserPhoto({commit:e},a){e("UPDATE_USER_PHOTO",a)}},getters:{isLoggedIn:e=>!!e.user,user:e=>e.user}});const va=e=>((0,n.Qi)("data-v-13fef6a1"),e=e(),(0,n.jt)(),e),fa={class:"block text-center",style:{"margin-top":"30px","margin-bottom":"20px","margin-left":"100px","margin-right":"100px"}},ga=["src"],ha=va((()=>(0,n.Lk)("div",{class:"image-overlay"},null,-1))),ba={class:"carousel-text"};function ka(e,a,t,s,o,r){const l=(0,n.g2)("el-carousel-item"),i=(0,n.g2)("el-carousel");return(0,n.uX)(),(0,n.CE)("div",fa,[(0,n.bF)(i,{interval:4e3,type:"card",height:"400px",width:"800px"},{default:(0,n.k6)((()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(o.images,(e=>((0,n.uX)(),(0,n.Wv)(l,{key:e.id},{default:(0,n.k6)((()=>[(0,n.Lk)("img",{src:e.imageUrl,alt:"Image",width:"800",height:"400"},null,8,ga),ha,(0,n.Lk)("p",ba,(0,O.v_)(e.caption),1)])),_:2},1024)))),128))])),_:1})])}var La={data(){return{images:[{id:1,imageUrl:t(9123),caption:"Hello"},{id:2,imageUrl:t(3060),caption:"Hello"},{id:3,imageUrl:t(4865),caption:"Hello"},{id:4,imageUrl:t(9634),caption:"Hello"}]}}};const ya=(0,F.A)(La,[["render",ka],["__scopeId","data-v-13fef6a1"]]);var _a=ya;const wa=[{path:"/musicspace",name:"musicspace",component:ze,meta:{requiresAuth:!0}},{path:"/",name:"home",component:_a},{path:"/login/",name:"login",component:Z},{path:"/register/",name:"register",component:ia},{path:"/404/",name:"404",component:pa},{path:"/:catchAll(.*)",redirect:"/404/"}],Ca=(0,j.aE)({history:(0,j.LA)(),routes:wa});Ca.beforeEach(((e,a,t)=>{e.matched.some((e=>e.meta.requiresAuth))?ma.getters.isLoggedIn?t():t("/login"):t()}));var Ea=Ca,Fa=t(562);t(4188);(0,s.Ef)(U).use(ma).use(Ea).use(Fa.A).mount("#app")},9123:function(e,a,t){e.exports=t.p+"static/img/1.c4dbc70f.jpg"},3060:function(e,a,t){e.exports=t.p+"static/img/2.00052af5.jpg"},4865:function(e,a,t){e.exports=t.p+"static/img/3.d41ad0fc.jpg"},9634:function(e,a,t){e.exports=t.p+"static/img/4.1421200b.jpg"},1060:function(e,a,t){e.exports=t.p+"static/img/search.192a6e49.png"}},a={};function t(s){var n=a[s];if(void 0!==n)return n.exports;var o=a[s]={exports:{}};return e[s].call(o.exports,o,o.exports,t),o.exports}t.m=e,function(){var e=[];t.O=function(a,s,n,o){if(!s){var r=1/0;for(u=0;u<e.length;u++){s=e[u][0],n=e[u][1],o=e[u][2];for(var l=!0,i=0;i<s.length;i++)(!1&o||r>=o)&&Object.keys(t.O).every((function(e){return t.O[e](s[i])}))?s.splice(i--,1):(l=!1,o<r&&(r=o));if(l){e.splice(u--,1);var c=n();void 0!==c&&(a=c)}}return a}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[s,n,o]}}(),function(){t.n=function(e){var a=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(a,{a:a}),a}}(),function(){t.d=function(e,a){for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/"}(),function(){var e={524:0};t.O.j=function(a){return 0===e[a]};var a=function(a,s){var n,o,r=s[0],l=s[1],i=s[2],c=0;if(r.some((function(a){return 0!==e[a]}))){for(n in l)t.o(l,n)&&(t.m[n]=l[n]);if(i)var u=i(t)}for(a&&a(s);c<r.length;c++)o=r[c],t.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return t.O(u)},s=self["webpackChunkplayer_web"]=self["webpackChunkplayer_web"]||[];s.forEach(a.bind(null,0)),s.push=a.bind(null,s.push.bind(s))}();var s=t.O(void 0,[504],(function(){return t(9257)}));s=t.O(s)})();
//# sourceMappingURL=app.dd395c04.js.map